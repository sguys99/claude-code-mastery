# 노션 기반 견적서 뷰어 MVP PRD

## 🎯 핵심 정보

**목적**: 노션 데이터베이스에 작성한 견적서를 클라이언트가 웹에서 바로 확인하고 PDF로 다운로드할 수 있는 시스템
**사용자**: 견적서 링크를 받은 클라이언트 (회원가입/로그인 불필요)

## 🚶 사용자 여정

```
1. [클라이언트 시작]
   ↓ 이메일/카톡으로 받은 견적서 링크 클릭

2. [견적서 뷰어 페이지]
   ↓ 견적서 고유 ID로 노션 API 호출

   [정상 조회] → 견적서 내용 표시 → 3단계로 이동
   [오류 발생] → 에러 페이지 표시 (404/500)
   ↓

3. [견적서 확인 및 다운로드]
   ↓ 사용자 선택

   [PDF 다운로드 버튼 클릭] → PDF 생성 및 다운로드
   [뒤로가기] → 홈페이지 이동
   ↓

4. [완료] → 브라우저 닫기 또는 홈페이지로 이동
```

## ⚡ 기능 명세

### 1. MVP 핵심 기능

| ID       | 기능명           | 설명                                                 | MVP 필수 이유              | 관련 페이지        |
| -------- | ---------------- | ---------------------------------------------------- | -------------------------- | ------------------ |
| **F001** | 노션 견적서 조회 | 고유 ID로 노션 데이터베이스에서 견적서 정보 가져오기 | 핵심 비즈니스 로직         | 견적서 뷰어 페이지 |
| **F002** | 견적서 렌더링    | 조회한 데이터를 보기 좋은 견적서 형태로 화면에 표시  | 사용자에게 정보 전달       | 견적서 뷰어 페이지 |
| **F003** | PDF 다운로드     | 현재 표시된 견적서를 PDF 파일로 변환하여 다운로드    | 핵심 가치 제공 (보관/인쇄) | 견적서 뷰어 페이지 |

### 2. MVP 필수 지원 기능

| ID       | 기능명         | 설명                                                  | MVP 필수 이유              | 관련 페이지        |
| -------- | -------------- | ----------------------------------------------------- | -------------------------- | ------------------ |
| **F010** | 에러 처리      | 잘못된 ID, 노션 API 오류 시 사용자 친화적 에러 메시지 | 사용자 경험 최소 보장      | 에러 페이지        |
| **F011** | 로딩 상태 표시 | 노션 API 호출 중 로딩 인디케이터 표시                 | 사용자에게 진행 상태 전달  | 견적서 뷰어 페이지 |
| **F012** | 랜딩 페이지    | 서비스 소개 및 사용 방법 안내                         | 첫 방문자를 위한 기본 안내 | 홈 페이지          |

### 3. MVP 이후 기능 (제외)

- 견적서 수정 기능
- 견적서 이력 관리
- 사용자 인증 (회원가입/로그인)
- 견적서 생성 기능 (노션에서만 생성)
- 댓글/피드백 기능
- 견적서 공유 기능
- 알림 기능
- 다국어 지원

## 📱 메뉴 구조

```
📱 견적서 뷰어 내비게이션
├── 🏠 홈
│   └── 기능: F012 (서비스 소개 및 안내)
├── 📄 견적서 뷰어 (/quote/[id])
│   └── 기능: F001, F002, F003, F010, F011 (견적서 조회/표시/다운로드)
└── ❌ 에러 페이지
    └── 기능: F010 (에러 메시지 표시)

🔧 공통 요소 (모든 페이지)
├── 헤더
│   └── 로고 + 홈 링크
└── 푸터
    └── 저작권 정보
```

---

## 📄 페이지별 상세 기능

### 홈 페이지 (/)

> **구현 기능:** `F012` | **메뉴 위치:** 메인 홈

| 항목            | 내용                                                                                                                                                                    |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 서비스 랜딩 페이지 - 견적서 뷰어 서비스 소개 및 사용 방법 안내                                                                                                          |
| **진입 경로**   | 브라우저 직접 접속, 헤더 로고 클릭, 잘못된 URL 접속 시 리디렉션                                                                                                         |
| **사용자 행동** | 서비스 소개 읽기, 사용 방법 확인, 샘플 견적서 링크 클릭 (선택)                                                                                                          |
| **주요 기능**   | • 서비스 소개 섹션 (무엇을 할 수 있는지)<br>• 사용 방법 안내 (견적서 링크 받기 → 클릭 → 확인 → 다운로드)<br>• 샘플 견적서 보기 버튼 (데모용)<br>• **시작하기** CTA 버튼 |
| **다음 이동**   | 샘플 견적서 클릭 → 견적서 뷰어 페이지, 이메일에서 받은 링크로 이동                                                                                                      |

---

### 견적서 뷰어 페이지 (/quote/[id])

> **구현 기능:** `F001`, `F002`, `F003`, `F010`, `F011` | **인증:** 불필요 (공개 페이지)

| 항목            | 내용                                                                                                                                                                                                                                                                                                                                                                                                      |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 핵심 기능 페이지 - 견적서 내용 표시 및 PDF 다운로드 제공                                                                                                                                                                                                                                                                                                                                                  |
| **진입 경로**   | 이메일/메신저로 받은 견적서 링크 클릭, 홈에서 샘플 견적서 클릭                                                                                                                                                                                                                                                                                                                                            |
| **사용자 행동** | 견적서 내용 읽기, 항목별 금액 확인, PDF 다운로드 버튼 클릭                                                                                                                                                                                                                                                                                                                                                |
| **주요 기능**   | • **견적서 헤더**: 견적서 제목, 발행일, 견적서 번호<br>• **발신자 정보**: 회사명, 담당자, 연락처<br>• **수신자 정보**: 고객명, 연락처<br>• **견적 항목 테이블**: 항목명, 수량, 단가, 금액<br>• **합계 금액**: 부가세 포함/미포함, 총액<br>• **특이사항**: 유효기간, 결제조건, 기타 안내<br>• **로딩 상태**: 스켈레톤 UI 또는 스피너<br>• **PDF 다운로드** 버튼 (우측 상단 고정)<br>• **홈으로 이동** 버튼 |
| **다음 이동**   | PDF 다운로드 완료 → 페이지 유지, 홈 버튼 → 홈 페이지, 오류 발생 → 에러 페이지                                                                                                                                                                                                                                                                                                                             |

---

### 에러 페이지 (/quote/[id]/error, /404)

> **구현 기능:** `F010` | **메뉴 위치:** 자동 이동

| 항목            | 내용                                                                                                                                                                                                                                              |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 오류 발생 시 사용자 친화적 메시지 표시                                                                                                                                                                                                            |
| **진입 경로**   | 잘못된 견적서 ID, 노션 API 오류, 존재하지 않는 페이지 접속                                                                                                                                                                                        |
| **사용자 행동** | 에러 메시지 확인, 홈으로 돌아가기 버튼 클릭                                                                                                                                                                                                       |
| **주요 기능**   | • **404 에러**: "견적서를 찾을 수 없습니다" 메시지<br>• **500 에러**: "일시적인 오류가 발생했습니다" 메시지<br>• **노션 연결 오류**: "견적서를 불러올 수 없습니다" 메시지<br>• **홈으로 돌아가기** 버튼<br>• 에러 아이콘 및 간단한 해결 방법 안내 |
| **다음 이동**   | 홈으로 돌아가기 → 홈 페이지                                                                                                                                                                                                                       |

---

## 🗄️ 데이터 모델

### Quote (노션 데이터베이스)

| 필드           | 설명                         | 타입/관계                     |
| -------------- | ---------------------------- | ----------------------------- |
| id             | 고유 식별자 (노션 페이지 ID) | String (UUID)                 |
| quote_number   | 견적서 번호                  | String                        |
| title          | 견적서 제목                  | String                        |
| issue_date     | 발행일                       | Date                          |
| valid_until    | 유효기간                     | Date                          |
| sender_company | 발신자 회사명                | String                        |
| sender_name    | 발신자 담당자명              | String                        |
| sender_contact | 발신자 연락처                | String                        |
| client_name    | 고객명                       | String                        |
| client_contact | 고객 연락처                  | String                        |
| items          | 견적 항목 목록               | Array<QuoteItem>              |
| subtotal       | 소계                         | Number                        |
| tax            | 부가세                       | Number                        |
| total          | 총액                         | Number                        |
| payment_terms  | 결제조건                     | String                        |
| notes          | 특이사항                     | String                        |
| status         | 견적서 상태                  | Select (draft/active/expired) |

### QuoteItem (견적 항목)

| 필드        | 설명               | 타입/관계 |
| ----------- | ------------------ | --------- |
| name        | 항목명             | String    |
| description | 항목 설명          | String    |
| quantity    | 수량               | Number    |
| unit_price  | 단가               | Number    |
| amount      | 금액 (수량 × 단가) | Number    |

## 🛠️ 기술 스택 (최신 버전)

### 🎨 프론트엔드 프레임워크

- **Next.js 15.5.3** (App Router + Turbopack) - React 풀스택 프레임워크
- **TypeScript 5.6+** - 타입 안전성 보장
- **React 19.1.0** - UI 라이브러리 (최신 동시성 기능)

### 🎨 스타일링 & UI

- **TailwindCSS v4** (설정파일 없는 새로운 엔진) - 유틸리티 CSS 프레임워크
- **shadcn/ui** - 고품질 React 컴포넌트 라이브러리 (new-york style)
- **Lucide React** - 아이콘 라이브러리

### 📝 폼 & 검증

- **React Hook Form 7.x** - 폼 상태 관리 (필요 시)
- **Zod 4.x** - 스키마 검증 라이브러리 (노션 응답 검증)

### 🔗 API 연동

- **@notionhq/client** - 노션 공식 JavaScript SDK
- **Notion API v1** - 노션 데이터베이스 조회 API

### 📄 PDF 생성

- **react-to-pdf** 또는 **jsPDF + html2canvas** - 클라이언트 사이드 PDF 생성
- **@react-pdf/renderer** (대안) - React 컴포넌트 기반 PDF 생성

### 🚀 배포 & 호스팅

- **Vercel** - Next.js 15 최적화 배포 플랫폼

### 📦 패키지 관리

- **npm** - 의존성 관리

---

## 🔄 처리 프로세스 검증

### ✅ 정합성 검증 완료

#### 🔍 1단계: 기능 명세 → 페이지 연결 검증

- [✅] F001 (노션 견적서 조회) → 견적서 뷰어 페이지
- [✅] F002 (견적서 렌더링) → 견적서 뷰어 페이지
- [✅] F003 (PDF 다운로드) → 견적서 뷰어 페이지
- [✅] F010 (에러 처리) → 에러 페이지, 견적서 뷰어 페이지
- [✅] F011 (로딩 상태) → 견적서 뷰어 페이지
- [✅] F012 (랜딩 페이지) → 홈 페이지

#### 🔍 2단계: 메뉴 구조 → 페이지 연결 검증

- [✅] 홈 → 홈 페이지 존재
- [✅] 견적서 뷰어 → 견적서 뷰어 페이지 존재
- [✅] 에러 페이지 → 에러 페이지 존재

#### 🔍 3단계: 페이지별 상세 기능 → 역참조 검증

- [✅] 홈 페이지: F012 → 기능 명세 존재
- [✅] 견적서 뷰어 페이지: F001, F002, F003, F010, F011 → 모두 기능 명세 존재
- [✅] 에러 페이지: F010 → 기능 명세 존재

#### 🔍 4단계: 누락 및 고아 항목 검증

- [✅] 기능 명세의 모든 기능이 페이지에서 구현됨
- [✅] 모든 페이지가 메뉴 구조에서 접근 가능
- [✅] 고아 기능/페이지 없음

---

## 🎯 개발 우선순위 (권장)

### Phase 1: 기본 구조 (1-2일)

1. Next.js 프로젝트 초기 설정 완료 (이미 완료)
2. 노션 API 연동 테스트 (API 키 설정, 데이터베이스 ID 확인)
3. 홈 페이지 및 기본 레이아웃 구현

### Phase 2: 핵심 기능 (3-4일)

1. 견적서 뷰어 페이지 구현 (F001, F002)
2. 노션 데이터 조회 및 렌더링
3. 로딩 상태 및 에러 처리 (F010, F011)

### Phase 3: PDF 다운로드 (2-3일)

1. PDF 생성 라이브러리 선정 및 통합
2. 견적서 → PDF 변환 로직 구현 (F003)
3. 다운로드 기능 완성

### Phase 4: 마무리 (1-2일)

1. 에러 페이지 스타일링
2. 전체 UX/UI 개선
3. 반응형 디자인 적용
4. 배포 및 테스트

**총 예상 개발 기간: 7-11일 (1인 개발 기준)**

---

## 📋 환경 설정 요구사항

### 필수 환경변수 (.env.local)

```bash
# Notion API 설정
NOTION_API_KEY=secret_xxxxxxxxxxxxxxxxxxxxx
NOTION_DATABASE_ID=xxxxxxxxxxxxxxxxxxxxx

# Next.js 설정
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### 노션 데이터베이스 구조 요구사항

- 데이터베이스 타입: Table
- 필수 속성: 위 데이터 모델의 모든 필드
- API 통합 권한 부여 필요

---

이 PRD는 바로 개발에 착수할 수 있도록 최소 기능에 집중했습니다. 추가 기능은 MVP 검증 후 단계적으로 확장하세요.
